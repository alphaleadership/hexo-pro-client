"use strict";(self.webpackChunkarco_design_pro=self.webpackChunkarco_design_pro||[]).push([[766,602],{50598:function(e,t,n){var r,o=n(4519);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}t.Z=function(e){return o.createElement("svg",a({className:"sort_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12,height:12},e),r||(r=o.createElement("path",{d:"M438.857 73.143H1024v73.143H438.857zm0 268.434H1024v73.143H438.857zm0 267.703H1024v73.143H438.857zm0 268.434H1024v73.143H438.857zm-24.868-670.72L206.994 0 0 206.994h103.131l67.292-67.291V389.85h73.143V139.703l66.56 67.291h103.863zM0 817.006L206.994 1024 413.99 817.006H310.126l-66.56 67.291V634.15h-73.143v250.148l-67.292-67.291H0z",className:"sort_svg__custom-cursor-on-hover",fill:"#1296db"})))}},63462:function(e,t,n){var r=n(42982),o=n(70885),a=n(4519),i=n(24422),c=n(8965),l=n(90722),u=n(46138),s=n(69451),f=n(63193),d=n(7538),g=n(63258),m=n(46376),p=u.Qf.define([{tag:f.pJ.heading1,fontSize:"1.6em",fontWeight:"bold"},{tag:f.pJ.heading2,fontSize:"1.4em",fontWeight:"bold"},{tag:f.pJ.heading3,fontSize:"1.2em",fontWeight:"bold"}]);t.Z=function(e){var t=e.initialValue,n=(e.adminSettings,e.setRendered),f=e.handleChangeContent,h=e.handleScroll,v=e.forceLineNumbers,Z=(0,a.useRef)(null);function E(e){for(var t=e;t;){if(!(t.scrollHeight<=t.clientHeight))return t;t=t.parentNode}}var y=(0,a.useState)(null),b=(0,o.Z)(y,2),w=b[0],k=b[1],S=(0,a.useState)(null),M=(0,o.Z)(S,2),C=M[0],x=M[1];return(0,a.useEffect)((function(){if(Z){var e=new s.F6,o=s.yy.create({doc:t,extensions:[i.tk.lineWrapping,d.sy,i.$f.of([].concat((0,r.Z)(g.wQ),[{key:"Tab",preventDefault:!0,run:g.at},{key:"Shift-Tab",preventDefault:!0,run:g.xi}])),e.of([(0,i.Eu)(),c.Xy,i.tk.lineWrapping]),(0,i.ZO)(),(0,i.HQ)(),(0,u.nF)(p),(0,l.JH)({base:l.eg}),i.tk.updateListener.of((function(e){e.docChanged&&(n(e.state.doc.toString()),f(e.state.doc.toString()))})),i.tk.domEventHandlers({scroll:function(e,t){h(E(document.querySelector("#markdown > div > div.cm-scroller")).scrollTop/E(document.querySelector("#markdown > div > div.cm-scroller")).scrollHeight)},paste:function(e,t){var n=e.clipboardData.items;if(n.length){for(var r,o=n.length-1;o>=0;o--)if("file"==n[o].kind){r=n[o].getAsFile();break}if(r){var a=new FileReader;a.onload=function(e){(function(e,t){return new Promise((function(n,r){m.ZP.post("/hexopro/api/images/upload",{data:e,filename:t}).then((function(e){n(e.data)}))}))})(e.target.result,null).then((function(e){var n=t.state.replaceSelection("\n![".concat(e.msg,"](").concat(e.src,")"));t.update([t.state.update(n)])}))},a.readAsDataURL(r)}}}})]}),a=new i.tk({parent:Z.current,state:o});return k(a),x(e),function(){return a.destroy()}}}),[Z]),(0,a.useEffect)((function(){w&&C&&(v?w.dispatch({effects:C.reconfigure([(0,i.Eu)(),c.Xy,i.tk.lineWrapping])}):w.dispatch({effects:C.reconfigure([])}))}),[w,v]),(0,a.useEffect)((function(){if(w&&t){var e=w.state.update({changes:{from:0,to:w.state.doc.length,insert:t},selection:w.state.selection});w.dispatch(e)}}),[t,w]),[Z,w]}},70808:function(e,t,n){n.r(t),n.d(t,{FrontMatterAdder:function(){return m}});var r=n(1413),o=n(70885),a=(n(47872),n(82357)),i=(n(58186),n(3024)),c=(n(35749),n(29413)),l=(n(70198),n(52861)),u=(n(35495),n(79431)),s=(n(63793),n(79721)),f=(n(39340),n(34998)),d=n(4519),g=(n(93602),f.Z.Group);function m(e){var t=e.visible,n=e.onClose,m=e.title,p=e.existFrontMatter,h=e.frontMatter,v=e.onChange,Z=(0,d.useState)(!1),E=(0,o.Z)(Z,2),y=E[0],b=E[1],w=(0,d.useState)(""),k=(0,o.Z)(w,2),S=k[0],M=k[1],C=(0,d.useState)(""),x=(0,o.Z)(C,2),H=x[0],_=x[1];(0,d.useEffect)((function(){b(t)}),[t]);var z=function(){if(0!=S.trim().length){var e=(0,r.Z)({},h);e[S]=H,v(e)}};return y&&d.createElement(a.Z,{title:m,bordered:!0,hoverable:!0,style:{position:"absolute",top:"100%",zIndex:100,width:"100%"},extra:d.createElement(i.Z,null,d.createElement(l.Z,{placeholder:"frontMatter Key",value:S,onChange:function(e){return M(e)},onPressEnter:z}),d.createElement(l.Z,{placeholder:"frontMatter value",value:H,onChange:function(e){return _(e)},onPressEnter:z}),d.createElement(c.Z,{type:"text",onClick:function(){b(!1),n()}},"X"))},function e(){var t=Object.keys(p);return d.createElement(g,{onChange:function(t){var n={};t.forEach((function(t){n[t]=e[t]?e[t]:null})),v(n)},value:Object.keys(h)},t.map((function(e,t){return d.createElement(f.Z,{key:e,value:e},(function(t){var n=t.checked;return d.createElement(u.Z,{key:e,content:h[e]?h[e]:"unset"},d.createElement(s.Z,{key:e,color:n?"purple":"",style:{marginBottom:5}},e))}))})))}())}},59302:function(e,t,n){n.r(t);var r=n(70885),o=(n(45506),n(3358)),a=n(79704),i=(n(84094),n(6438)),c=n(42499),l=n(31672),u=(n(35749),n(29413)),s=(n(43570),n(94294)),f=n(63462),d=n(46376),g=n(4519),m=n(76082),p=(n(93602),n(42374)),h=(n(86074),n(50598)),v=n(32048),Z=n.n(v),E=n(16893),y=n(9949),b=s.Z.Row,w=s.Z.Col,k=u.Z.Group;t.default=function(){var e=(0,m.k6)(),t=(0,g.useRef)(null),n=(0,g.useRef)(null),s=(0,m.UO)()._id,v=(0,g.useState)({isDraft:!0,source:null}),S=(0,r.Z)(v,2),M=(S[0],S[1]),C=(0,g.useState)({tags:[],categories:[],frontMatter:{},source:""}),x=(0,r.Z)(C,2),H=x[0],_=x[1],z=(0,g.useState)([]),P=(0,r.Z)(z,2),O=(P[0],P[1]),B=(0,g.useState)(""),L=(0,r.Z)(B,2),j=L[0],R=L[1],T=(0,g.useState)(""),F=(0,r.Z)(T,2),W=F[0],X=F[1],A=(0,g.useState)(""),V=(0,r.Z)(A,2),I=V[0],N=V[1],D=(0,g.useState)(""),U=(0,r.Z)(D,2),J=(U[0],U[1]),Q=(0,g.useState)(""),q=(0,r.Z)(Q,2),G=q[0],$=q[1],K=(0,g.useState)({}),Y=(0,r.Z)(K,2),ee=(Y[0],Y[1]),te=(0,g.useState)(!1),ne=(0,r.Z)(te,2),re=ne[0],oe=ne[1],ae=(0,g.useState)(!1),ie=(0,r.Z)(ae,2),ce=ie[0],le=ie[1],ue=(0,g.useState)(!1),se=(0,r.Z)(ue,2),fe=se[0],de=se[1],ge=function(e){return new Promise((function(t,n){d.Xn.get("/hexopro/api/pages/"+e).then((function(e){t(e.data)})).catch((function(e){n(e)}))}))},me=function(e,t){if("pageMeta"==e)return _(t),void O(Object.keys(t.frontMatter));if("page"==e){var n=t.raw.split("---"),r=""===n[0]?2:1,o=n.slice(r).join("---").trim();N(t.title),J(o),$(o),M(t);var a=t._content;R(a)}};(0,g.useEffect)((function(){var e={page:ge(s),pageMeta:new Promise((function(e,t){d.Xn.get("/hexopro/api/pageMeta/"+s).then((function(t){e(t.data)})).catch((function(e){t(e)}))}))};Object.keys(e).forEach((function(t){Promise.resolve(e[t]).then((function(e){var n={};n[t]=e,ee(n),me&&me(t,e)}))}))}),[]),(0,g.useEffect)((function(){var e=Z().debounce((function(e){!function(e){new Promise((function(t,n){d.Xn.post("/hexopro/api/pages/"+s,e).then((function(e){t(e.data)})).catch((function(e){n(e)}))}))}(e)}),1e3,{trailing:!0,loading:!0});t.current=e}),[]);var pe=(0,f.Z)({initialValue:j,adminSettings:{editor:{lineNumbers:!0}},setRendered:$,handleChangeContent:function(e){e!==G&&($(e),t.current({_content:e}))},handleScroll:function(e){var t=document.getElementById("preview").getBoundingClientRect().height;document.getElementById("preview").scrollTop=(document.getElementById("preview").scrollHeight-t)*e},forceLineNumbers:ce}),he=(0,r.Z)(pe,2),ve=he[0];return he[1],(0,g.useEffect)((function(){var e={code:function(e,t){var n=p.Z.getLanguage(t)?t:"plaintext";return"<pre><code>".concat(p.Z.highlight(e,{language:n}).value,"</code></pre>")}};y.TU.use({renderer:e}),y.TU.use({pedantic:!1,gfm:!0,breaks:!0}),X((0,y.TU)(G))}),[G]),g.createElement("div",null,g.createElement(b,{style:{width:"100%",borderBottomColor:"black",borderBottom:"1px solid gray",backgroundColor:"white"},align:"center"},g.createElement(w,{span:12},g.createElement("input",{style:{width:"100%",height:60,border:"none",outline:"none",boxSizing:"border-box",fontSize:28,fontWeight:500,marginLeft:10},value:I,onChange:function(e){var n;(n=e).target.value!=I&&(N(n.target.value),t.current({title:n.target.value}))}})),g.createElement(w,{span:2,offset:9,style:{alignItems:"center",justifyContent:"center",paddingLeft:50}},g.createElement(k,null,g.createElement(u.Z,{type:fe?"outline":"dashed",icon:g.createElement(h.Z,null),onClick:function(){return de(!fe)}}),g.createElement(u.Z,{type:"outline",icon:g.createElement(l.Z,null),onClick:function(){return le(!ce)}}),g.createElement(u.Z,{type:"outline",icon:g.createElement(c.Z,null),onClick:function(){return oe(!0)}}))),g.createElement(w,{span:1},g.createElement(o.Z,{focusLock:!0,title:"\u786e\u8ba4\u5220\u9664",content:"\u786e\u8ba4\u5220\u9664\u9875\u9762\u5417?",onOk:function(){i.Z.info({content:"ok"}),new Promise((function(e,t){d.Xn.get("/hexopro/api/pages/"+s+"/remove").then((function(t){e(t.data)})).catch((function(e){t(e)}))})),e.push("/pages")},onCancel:function(){i.Z.error({content:"cancel"})}},g.createElement(u.Z,{type:"secondary",icon:g.createElement(a.Z,null)})))),g.createElement(b,{style:{boxSizing:"border-box",margin:0,backgroundColor:"white",height:"100vh",overflow:"hidden",width:"100%"}},g.createElement(b,{id:"editorWrapper",style:{width:"100%"}},g.createElement(w,{id:"markdown",span:12,ref:ve,onMouseEnter:function(){return n.current="markdown"}}),g.createElement(w,{id:"preview",style:{overflowY:"scroll"},span:12,onMouseEnter:function(){return n.current="preview"},dangerouslySetInnerHTML:{__html:W}}))),g.createElement(E.PageSettings,{visible:re,setVisible:oe,pageMeta:H,setPageMeta:_,handleChange:function(e){return new Promise((function(t,n){d.Xn.post("/hexopro/api/pages/"+s,e).then((function(e){t(e.data)})).catch((function(e){n(e)}))}))}}))}},16893:function(e,t,n){n.r(t),n.d(t,{PageSettings:function(){return v}});var r=n(1413),o=n(70885),a=(n(56710),n(86721)),i=(n(70198),n(52861)),c=(n(58186),n(3024)),l=(n(35749),n(29413)),u=(n(35495),n(79431)),s=(n(63793),n(79721)),f=(n(84094),n(6438)),d=(n(43570),n(94294)),g=n(4519),m=n(70808),p=d.Z.Row,h=d.Z.Col;function v(e){var t=e.visible,n=e.setVisible,d=e.pageMeta,v=e.setPageMeta,Z=e.handleChange,E=(0,g.useState)(!1),y=(0,o.Z)(E,2),b=y[0],w=y[1],k=(0,g.useState)([]),S=(0,o.Z)(k,2),M=S[0],C=S[1];return g.createElement(a.Z,{title:g.createElement("div",{style:{textAlign:"left"}},"\u6587\u7ae0\u5c5e\u6027"),visible:t,onCancel:function(){v((0,r.Z)((0,r.Z)({},d),{},{tags:[],categories:[],frontMatter:M})),n(!1)},onOk:function(){var e;e=d.source,/^([a-zA-Z0-9-_\/]+)\/([a-zA-Z0-9-_]+\.md)$/i.test(e)?(n(!1),Z({frontMatter:d.frontMatter,source:d.source})):f.Z.error("\u914d\u7f6e\u7684\u9875\u9762\u8def\u5f84\u975e\u6cd5\u8bf7\u68c0\u67e5\uff01")},afterOpen:function(){C(d.frontMatter)},style:{width:800}},g.createElement(p,{style:{marginTop:15,marginBottom:15}},g.createElement(h,null,g.createElement(c.Z,{style:{width:"100",flexWrap:"wrap"}},Object.keys(d.frontMatter).map((function(e){return g.createElement(u.Z,{key:e,content:d.frontMatter[e]?d.frontMatter[e]:"unset"},g.createElement(s.Z,{closable:!0,onClose:function(){return function(e){var t={};Object.keys(d.frontMatter).forEach((function(n){n!==e&&(t[n]=d.frontMatter[n])}));var n=(0,r.Z)((0,r.Z)({},d),{},{frontMatter:t});v(n)}(e)},key:e,color:"blue",style:{marginBottom:5}},e))})),g.createElement(l.Z,{type:"dashed",onClick:function(){w(!b)}},"+\u81ea\u5b9a\u4e49frontMatter")),g.createElement(m.FrontMatterAdder,{existFrontMatter:M,onClose:function(){w(!1)},visible:b,title:"Font-Matter",frontMatter:d.frontMatter,onChange:function(e){var t=(0,r.Z)((0,r.Z)({},d),{},{frontMatter:e});v(t)}}))),g.createElement(p,{style:{marginTop:15,marginBottom:15}},g.createElement(h,null,g.createElement(i.Z,{style:{width:350},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165\u9875\u9762\u5b58\u653e\u8def\u5f84",value:d.source,onChange:function(e){var t=(0,r.Z)((0,r.Z)({},d),{},{source:e});v(t)}}))))}},93602:function(e,t,n){n.r(t),t.default={}}}]);
//# sourceMappingURL=766.81c7ff06.chunk.js.map